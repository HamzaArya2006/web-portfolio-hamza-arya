function C(...e){}function D(...e){}function j(e,t,i={}){window.gtag&&window.gtag("event",e,{value:t,...i})}const E="notification-container",A=5e3,x=5,u={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"};function O(){let e=document.getElementById(E);return e||(e=document.createElement("div"),e.id=E,e.className="notification-container",e.setAttribute("aria-live","polite"),e.setAttribute("aria-label","Notifications"),document.body.appendChild(e)),e}function I(e){const t=document.getElementById(e);t&&(t.classList.add("notification-exit"),setTimeout(()=>{t.remove();const i=document.getElementById(E);i&&i.children.length===0&&i.remove()},300))}function $(){const e=document.getElementById(E);if(!e)return;const t=Array.from(e.children);if(t.length>=x){const i=t[0];i&&I(i.id)}}function w({title:e,message:t,type:i=u.INFO,duration:r=A,onClose:s=null,dismissible:m=!0}){const n=O();$();const a=`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=document.createElement("div");o.id=a,o.className=`notification notification-${i}`,o.setAttribute("role","alert"),o.setAttribute("aria-live",i===u.ERROR?"assertive":"polite");const c={[u.SUCCESS]:`<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>`,[u.ERROR]:`<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>`,[u.WARNING]:`<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
    </svg>`,[u.INFO]:`<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>`};o.innerHTML=`
    <div class="notification-content">
      <div class="notification-icon-wrapper">
        ${c[i]||c[u.INFO]}
      </div>
      <div class="notification-body">
        ${e?`<div class="notification-title">${k(e)}</div>`:""}
        ${t?`<div class="notification-message">${k(t)}</div>`:""}
      </div>
      ${m?`
        <button 
          class="notification-close" 
          aria-label="Close notification"
          onclick="this.closest('.notification').dispatchEvent(new CustomEvent('notification:close'))"
        >
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      `:""}
    </div>
    ${r>0?'<div class="notification-progress"></div>':""}
  `,n.appendChild(o),requestAnimationFrame(()=>{o.classList.add("notification-enter")});const d=()=>{if(I(a),s)try{s()}catch{}};if(o.addEventListener("notification:close",d),r>0){const l=o.querySelector(".notification-progress");l&&(l.style.animationDuration=`${r}ms`);const v=setTimeout(d,r);o.addEventListener("mouseenter",()=>{clearTimeout(v),l&&(l.style.animationPlayState="paused")}),o.addEventListener("mouseleave",()=>{setTimeout(d,r),l&&(l.style.animationPlayState="running")})}return a}function k(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const b={success:(e,t,i={})=>w({...i,title:e,message:t,type:u.SUCCESS}),error:(e,t,i={})=>w({...i,title:e,message:t,type:u.ERROR}),warning:(e,t,i={})=>w({...i,title:e,message:t,type:u.WARNING}),info:(e,t,i={})=>w({...i,title:e,message:t,type:u.INFO})};function R(){const e=document.querySelector("form[data-contact]");if(!e)return;const t=document.querySelector("[data-contact-status]");t&&(t.setAttribute("role","status"),t.setAttribute("aria-live","polite"));let i=!1,r=e.querySelector('input[name="_ts"]');r||(r=document.createElement("input"),r.type="hidden",r.name="_ts",e.appendChild(r));let s=null;e.addEventListener("focusin",()=>{s||(s=Date.now(),r.value=s.toString())},{once:!0}),s||(r.value=Date.now().toString()),e.addEventListener("submit",async m=>{if(m.preventDefault(),i)return;i=!0;const n=new FormData(e);if(n.get("website")){e.reset(),i=!1;return}const a=(n.get("name")||"").toString().trim(),o=(n.get("email")||"").toString().trim(),c=(n.get("brief")||"").toString().trim(),d=(n.get("budget")||"").toString().trim();if(!a||!o||!c){t&&(t.textContent="Please fill in your name, email, and project brief.",t.classList.remove("hidden"),t.classList.remove("text-emerald-400"),t.classList.add("text-red-400")),i=!1;return}const l="/api/contact",v=e.querySelector('button[type="submit"]'),L=v?v.textContent:"",y=f=>{v&&(v.disabled=f,v.textContent=f?"Sending…":L)},g=(f,p="info")=>{t&&(t.textContent=f,t.classList.remove("hidden"),t.classList.remove("text-red-400","text-emerald-400"),t.classList.add(p==="error"?"text-red-400":"text-emerald-400"))},S={name:a,email:o,brief:c,budget:d,website:n.get("website")||"",_ts:Number(r.value)||Date.now()};try{y(!0);const f=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!f.ok){const p=await f.text().catch(()=>"");throw new Error(p||"Request failed")}g("Thanks! I will get back to you shortly.","success"),b.success("Message sent!","I will get back to you shortly."),e.reset(),i=!1;return}catch{if("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype)try{await B(S),g("Message queued. Will be sent when connection is restored.","info"),b.info("Message queued","Will be sent when connection is restored."),await(await navigator.serviceWorker.ready).sync.register("sync-contact-form"),e.reset(),i=!1;return}catch(p){if(p.name==="QuotaExceededError"){g("Storage limit reached. Please try again later or email directly.","error"),b.error("Storage limit reached","Please try again later or email directly."),i=!1;return}}}finally{y(!1)}const N=encodeURIComponent("New project inquiry"),T=encodeURIComponent(`Name: ${a}
Email: ${o}
Budget: ${d}

Brief:
${c}`);try{y(!0),window.location.href=`mailto:contact@hamzaarya.dev?subject=${N}&body=${T}`,g("Opening your email app… If it does not open, email contact@hamzaarya.dev","success"),b.info("Opening email app","If it does not open, email contact@hamzaarya.dev"),e.reset()}catch{g("Could not open email app. Please email contact@hamzaarya.dev","error")}finally{y(!1),i=!1}})}async function B(e){return new Promise((t,i)=>{const r=indexedDB.open("contact-forms",1);r.onerror=()=>i(r.error),r.onsuccess=()=>{const n=r.result.transaction(["submissions"],"readwrite").objectStore("submissions"),a={data:e,timestamp:Date.now()},o=n.add(a);o.onsuccess=()=>t(),o.onerror=()=>i(o.error)},r.onupgradeneeded=s=>{const m=s.target.result;m.objectStoreNames.contains("submissions")||m.createObjectStore("submissions",{keyPath:"id",autoIncrement:!0})}})}function _(){const e=document.querySelector("form[data-contact]");if(!e)return;e.querySelectorAll("input, textarea").forEach(n=>{n.addEventListener("blur",()=>{i(n)}),n.addEventListener("input",()=>{s(n)})});function i(n){const a=n.value.trim(),o=n.type,c=n.name;return s(n),n.required&&!a?(r(n,`${c} is required`),!1):o==="email"&&a&&!m(a)?(r(n,"Please enter a valid email address"),!1):!0}function r(n,a){n.classList.add("border-red-500"),n.setAttribute("aria-invalid","true");let o=n.parentNode.querySelector(".field-error");o&&o.remove(),o=document.createElement("div"),o.className="field-error text-red-400 text-sm mt-1",o.setAttribute("role","alert"),o.id=`${n.name||n.id||"field"}-error`,n.parentNode.appendChild(o),o.textContent=a;const c=n.getAttribute("aria-describedby"),d=o.id;c&&!c.includes(d)?n.setAttribute("aria-describedby",`${c} ${d}`):c||n.setAttribute("aria-describedby",d)}function s(n){n.classList.remove("border-red-500"),n.setAttribute("aria-invalid","false");const a=n.parentNode.querySelector(".field-error");if(a){const o=n.getAttribute("aria-describedby");if(o){const c=a.id,d=o.split(" ").filter(l=>l!==c).join(" ").trim();d?n.setAttribute("aria-describedby",d):n.removeAttribute("aria-describedby")}a.remove()}}function m(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}}const F=Object.freeze(Object.defineProperty({__proto__:null,bindContactForm:R,enhanceContactForm:_},Symbol.toStringTag,{value:"Module"}));let h=null;function W(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{h=e,setInterval(()=>{e.update()},2*60*60*1e3),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(q(),b.info("Update available","A new version of the site is available. Click reload to update."))})})}).catch(e=>{}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&e.data.type==="SW_ACTIVATED"&&C("Service Worker activated:",e.data.version)}),navigator.serviceWorker.addEventListener("controllerchange",()=>{})})}function q(){const e=document.getElementById("sw-update-toast");e&&e.remove();const t=document.createElement("div");t.id="sw-update-toast",t.className="sw-update-toast",t.innerHTML=`
    <div class="sw-update-content">
      <span>New version available!</span>
      <button id="sw-update-reload" class="sw-update-btn">Reload</button>
      <button id="sw-update-dismiss" class="sw-update-btn-dismiss" aria-label="Dismiss">×</button>
    </div>
  `,document.body.appendChild(t),setTimeout(()=>{t.classList.add("show")},100),t.querySelector("#sw-update-reload").addEventListener("click",()=>{h&&h.waiting&&h.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}),t.querySelector("#sw-update-dismiss").addEventListener("click",()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)})}function P(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];if(e){const t=e.loadEventEnd-e.loadEventStart,i=e.domContentLoadedEventEnd-e.domContentLoadedEventStart;performance.getEntriesByType&&performance.getEntriesByType("paint").forEach(s=>{C(`${s.name}: ${s.startTime}ms`)}),window.gtag&&window.gtag("event","page_load",{load_time:t,dom_content_time:i})}},0)})}function M(){}const z=Object.freeze(Object.defineProperty({__proto__:null,initAnalytics:M},Symbol.toStringTag,{value:"Module"}));export{z as a,D as e,F as f,P as i,C as l,b as n,W as r,j as t};
